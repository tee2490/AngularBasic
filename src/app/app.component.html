@if (showHeading) {
  <h1>Portfolio</h1>
}

@if (!submitted) {
  <h2>Personal Information</h2>
  <form>
    <div>
      <label for="name">Name</label>
      <input type="text" name="name" id="name" [(ngModel)]="nm" autocomplete="off" />
    </div>

    <div>
      <label for="email">Email</label>
      <input type="email" name="email" id="email" [(ngModel)]="em" autocomplete="off" />
    </div>

    <div>
      <label for="phone">Phone</label>
      <input type="tel" name="phone" id="phone" [(ngModel)]="ph" autocomplete="off" />
    </div>

    <div>
      <label for="address">Address</label>
      <input type="text" name="address" id="address" [(ngModel)]="add" />
    </div>
  </form>

  <h2>Qualifications</h2>
  @for (q of qualification; let i = $index; track q.school ?? q.degree ?? q.year ?? i) {
    <h3>Qualification {{ i + 1 }}</h3>
    <form>
      <div>
        <label for="school-{{ i }}">School/College</label>
        <input type="text" id="school-{{ i }}" name="school-{{ i }}" [(ngModel)]="q.school" autocomplete="off" />
      </div>

      <div>
        <label for="degree-{{ i }}">Degree</label>
        <input type="text" id="degree-{{ i }}" name="degree-{{ i }}" [(ngModel)]="q.degree" autocomplete="off" />
      </div>

      <div>
        <label for="year-{{ i }}">Year</label>
        <input type="text" id="year-{{ i }}" name="year-{{ i }}" [(ngModel)]="q.year" autocomplete="off" />
      </div>
    </form>
  } @empty {
    <p>No qualifications</p>
  }

  <div class="btn-container">
    <button (click)="addQualification()" type="button">Add Qualification</button>
    <button type="button" (click)="formSubmit()">Submit</button>
  </div>
} @else {
  <ng-container [ngTemplateOutlet]="preview"></ng-container>
}

<ng-template #preview>
  <div class="preview-container">
    <h2>Preview</h2>
    <div>
      <p class="name">{{ nm }}</p>
      <p>Email : {{ em }}</p>
      <p>Phone : {{ ph }}</p>
      <p>Address : {{ add }}</p>
    </div>

    <div>
      <h3>Qualifications</h3>
      @for (q of qualification; track q.school ?? q.degree ?? q.year) {
        <div>
          <h5>School/College : {{ q.school }}</h5>
          <h5>Degree : {{ q.degree }} ({{ q.year }})</h5>
        </div>
      } @empty {
        <p>No qualifications</p>
      }
    </div>

    <button class="btn-edit" type="button" (click)="formEdit()">Edit</button>
  </div>
</ng-template>
